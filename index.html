<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Test New Army Button</title>
<style>
  .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); }
  .modal-content { background:#fff; padding:20px; margin:20% auto; width:300px; text-align:center; }
</style>
</head>
<body>

<button id="new-army">New Army</button>

<div id="faction-modal" class="modal">
  <div class="modal-content">
    <h2>Select Faction</h2>
    <button data-faction="Rebels">Rebels</button>
    <button data-faction="Imperials">Imperials</button>
  </div>
</div>

<div id="unit-grid"></div>
<div id="army-container"></div>

<script>
const newArmyBtn = document.getElementById('new-army');
const factionModal = document.getElementById('faction-modal');
const unitGridEl = document.getElementById('unit-grid');
const armyContainerEl = document.getElementById('army-container');

let army = [];
let currentFaction = null;

// Show Faction Modal
newArmyBtn.addEventListener('click', () => {
  factionModal.style.display = 'block';
});

// Faction Buttons
factionModal.querySelectorAll('button[data-faction]').forEach(btn => {
  btn.addEventListener('click', () => {
    currentFaction = btn.dataset.faction;
    factionModal.style.display = 'none';
    console.log('Faction selected:', currentFaction);
    army = [];
    renderUnits();
    renderArmy();
  });
});

// Dummy Render Units
function renderUnits() {
  unitGridEl.innerHTML = '';
  if (!currentFaction) return;
  const units = [{name:'Unit 1', points:10},{name:'Unit 2', points:20}];
  units.forEach(unit => {
    const card = document.createElement('div');
    card.innerHTML = `<h3>${unit.name}</h3><p>${unit.points} pts</p><button>Add to Army</button>`;
    card.querySelector('button').addEventListener('click', () => {
      army.push(unit);
      renderArmy();
    });
    unitGridEl.appendChild(card);
  });
}

// Dummy Render Army
function renderArmy() {
  armyContainerEl.innerHTML = '';
  army.forEach(u => {
    const div = document.createElement('div');
    div.textContent = `${u.name} (${u.points} pts)`;
    armyContainerEl.appendChild(div);
  });
}
</script>

</body>
</html>
